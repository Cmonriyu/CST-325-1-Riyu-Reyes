<!DOCTYPE html>
<html>
<head>

    <script>
        var sceneList = [];
        var canvas;
        var currentFrameNumber = 0;
        
        class Rectangle{
            constructor(x, y, color, draw,) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.draw = function(){
                    var ctx = canvas.getContext("2d");
                    ctx.fillStyle = this.color;
                    ctx.fillRect(this.x, this.y, 2, 20);
                    }

                this.velocity = {x: 0, y: 0};
                this.update = function(){
                    this.velocity.y += 1;
                    this.y = this.y + this.velocity.y * 0.16;
                    if (this.y > 350) {
                        sceneList.splice(sceneList.indexOf(this),1);
                    }
                }
            }
        }

        function init(){
            canvas = document.getElementById("myCanvas");
            updateAndDraw();
        }            

        function updateAndDraw(){
            var ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            sceneList.push(new Rectangle(Math.floor(Math.random() * 301), -50, `rgb(146, 186, 210)`));
            sceneList.forEach((Rectangle) => {Rectangle.draw(); Rectangle.update();});
            currentFrameNumber += 1;
            console.log(currentFrameNumber);
            updateStats();
            requestAnimationFrame(updateAndDraw);
        }

        function updateStats(){
            var p = document.getElementById("frameCount");
            p.innerText = "Frame Count: " + currentFrameNumber;
            var p = document.getElementById("rectangleCount");
            p.innerText = "Rectangle Count: " + sceneList.length;
        }

    </script>

<title>
</title>
</head>
<body onload = "init()">
    <canvas id="myCanvas" width="300" height="200" style="border:1px solid gray;"> </canvas>
    <br> 
    <p id = "frameCount"></p>
    <p id = "rectangleCount" ></p>
    
</body>
</html>